# All possible options and their defaults: https://github.com/zitadel/zitadel/blob/main/cmd/defaults.yaml
Log:
  Level: "info"

# Make ZITADEL accessible over HTTP, not HTTPS
ExternalSecure: false
TLS:
  Enabled: false

ExternalDomain: auth.{{ cert.domain }}

Database:
  postgres:
    Host: "db"
    Port: 5432
    Database: zitadel
    User:
      SSL:
        Mode: "disable"
      Username: zitadel
      Password: { { db.ZITADEL_PG_PASS } }
    Admin:
      ExistingDatabase: postgres
      SSL:
        Mode: "disable"
      Username: admin
      Password: { { db.POSTGRES_PASSWORD } }

DefaultInstance:
  SMTPConfiguration:
    # Configuration of the host
    SMTP:
      # must include the port, like smtp.mailtrap.io:2525. IPv6 is also supported, like [2001:db8::1]:2525
      Host: # ZITADEL_DEFAULTINSTANCE_SMTPCONFIGURATION_SMTP_HOST
      User: # ZITADEL_DEFAULTINSTANCE_SMTPCONFIGURATION_SMTP_USER
      Password: # ZITADEL_DEFAULTINSTANCE_SMTPCONFIGURATION_SMTP_PASSWORD
    TLS: true
    From: noreply@shawlynot.dev
    FromName: Therapy (no-reply)

    # Enforce multi-factor on every login and allow only email OTP
  LoginPolicy:                                # instance default login policy :contentReference[oaicite:12]{index=12}
    AllowUsernamePassword: true               # enable user/pass logins :contentReference[oaicite:13]{index=13}
    AllowRegister: true                       # allow self-registration :contentReference[oaicite:14]{index=14}
    AllowExternalIdp: false                   # disable external IdPs :contentReference[oaicite:15]{index=15}
    ForceMfa: true                            # require 2FA on every login :contentReference[oaicite:16]{index=16}
    PasswordlessType: PASSWORDLESS_TYPE_NOT_ALLOWED
    HidePasswordReset: false
    IgnoreUnknownUsernames: false
    DefaultRedirectUri: 'https://zitadel.example.com/ui/console/'  # fallback URI :contentReference[oaicite:17]{index=17}
    PasswordCheckLifetime: '3600s'
    ExternalLoginCheckLifetime: '3600s'
    MfaInitSkipLifetime: '0s'
    SecondFactorCheckLifetime: '0s'
    MultiFactorCheckLifetime: '0s'
    SecondFactors:
      - SECOND_FACTOR_TYPE_OTP_EMAIL          # only email OTP :contentReference[oaicite:18]{index=18}
    MultiFactors: []
    Idps: []
    AllowDomainDiscovery: false
    DisableLoginWithEmail: false
    DisableLoginWithPhone: false
    ForceMfaLocalOnly: false